<html>
<head>
    <link rel="stylesheet" type="text/css" href="css/index.css"/>
    <script src="js/jquery-2.1.1.min.js"></script>
    <script>
        var employee_position = 0;
        window.onload = function () {
            var cookies = document.cookie;
            var cookie_employee = document.cookie.split("preEmployee=")[1];
            var employee_attrs = cookie_employee.split("&");
            console.log("employee_attrs:" + employee_attrs);
            var employee_username = employee_attrs[0];
            var employee_position = employee_attrs[1];
            var employee_username_length = employee_username.length;
            var employee_position_length = employee_position.length;
            employee_username = employee_username.substr(9, employee_username_length - 1);
            employee_position = employee_position.substr(9, employee_position_length - 1);
            console.log("欢迎" + employee_username + "登录");
            console.log("position="+employee_position);
            document.getElementById("cookie_username").innerHTML = employee_username;
            $.ajax({
                method: "get",
                url: "/Login_success.ashx",
                success: function (result) {
                    result = JSON.parse(result);
                    var str = "";
                    str += "<tr>";
                    str += "<th>编号</th>";
                    str += "<th>姓名</th>";
                    str += "<th>密码</th>";
                    str += "<th>性别</th>";
                    str += "<th>年龄</th>";
                    str += "<th>职位</th>";
                    str += "<th>电话</th>";
                    str += "<th>身份证号</th>";
                    str += "</tr>";
                    for (var i = 0; i < result.length; i++) {
                        var emp = result[i];
                        var no = emp.EmployeeNo;
                        var name = emp.EmployeeName;
                        var password = emp.EmployeePassword;
                        var gender = emp.EmployeeGender;
                        var age = emp.EmployeeAge;
                        var position = emp.EmployeePosition;
                        var tel = emp.EmployeeTel;
                        var id = emp.EmployeeId;
                        if (result[i].EmployeePosition <= employee_position) {
                            str += "<tr>";
                            str += "<td>" + no + "</td>";
                            str += "<td>" + name + "</td>";
                            str += "<td>" + password + "</td>";
                            str += "<td>" + gender + "</td>";
                            str += "<td>" + age + "</td>";
                            str += "<td>" + position + "</td>";
                            str += "<td>" + tel + "</td>";
                            str += "<td>" + id + "</td>";
                            str += "</tr>";
                        }
                        // console.log(str);
                    }
                    document.getElementById("data_table").innerHTML = str;
                }
            });
        }

		function ocDetail(detail) {
			var main_left = document.getElementsByClassName("main-left")[0];
			var main_right = document.getElementsByClassName("main-right")[0];
			var label_flag = document.getElementById("detail-flag");
			if(label_flag.textContent == "<") {
				main_left.style.width = "0";
				main_left.style.display = "none";
				label_flag.innerHTML = ">";
				detail.style.left = "0";
			} else {
				main_left.style.width = "20%";
				label_flag.innerHTML = "<";
				detail.style.left = "20%";
				main_left.style.display = "block";
			}
		}

    </script>
</head>
<body>
    <div class="header">
        <div class="border">
            <label>216酒店</label>
            <label>欢迎<b id="cookie_username"></b>,这是你的第二个<b>家</b></label>
            <a href="/login.html">注销账号</a>
        </div>
    </div>
    <div class="main">
        <div class="detail" onclick="ocDetail(this)">
            <p id="detail-flag"><</p>
        </div>
        <div class="main-left">
            <ul>
                <li class="list-1">
                    <label>员工管理</label>
                </li>
                <li class="list-2"><label>11111</label></li>
                <li class="list-1">
                    <label>
                        客人管理
                    </label>
                </li>
                <li class="list-1"><label>房间管理</label></li>
                <li class="list-1"><label>物品管理</label></li>
            </ul>
        </div>
        <div class="main-right">
            <table id="data_table">
            </table>
        </div>
    </div>
    <div class="footer">
    </div>
</body>
</html>